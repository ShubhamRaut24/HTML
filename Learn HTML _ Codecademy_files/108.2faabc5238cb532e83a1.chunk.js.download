(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[108],{babB:function(e,t,a){"use strict";var s=a("QHjb"),r=a("lREb"),n=a("q1tI"),c=a.n(n),o=a("/MKj"),i=a("swBZ"),p=a("5JLQ"),l=a("rePB"),d=a("QkVN"),b=a.n(d),h=a("CWAm"),u=a("wE9P"),k=a("p7af"),m=a("84j9"),_=a("YA6q"),j=a("jhD/"),O=a("2oex"),f=a("KTzr");function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function project_ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function project_objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?project_ownKeys(Object(a),!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):project_ownKeys(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const updateProjectTaskProgress=(e,t,a)=>async(s,r)=>{const n=Object(u.a)(r(),{id:e.id});if("project"===n.type){const r=e.projectInformation.self_assessments.reduce(((e,s)=>b()(e,s.tasks.reduce(((e,{task_key:s})=>{const r=s===t?a:n.checklist[s],c="true"===r||!0===r;return b()(e,{[s]:c})}),{}))),{}),c=Object.values(r),o=c.filter((e=>e)).length===c.length,i=project_objectSpread(project_objectSpread({},n),{},{content_item_id:e.id,checklist:r,completed:o});s(Object(h.h)({data:{project:e.slug,self_assessment:t,submit_type:"project_checklist_submit"}})),o&&s(Object(h.b)()),s(Object(k.b)(i)),s(((e,t)=>async(a,s)=>{const r=Object(O.h)(s()),n=r.track_id,c=await Object(_.a)({method:"POST",endpoint:"/practice/update_project_progress",data:_objectSpread({project_id:e,track_id:n,tasks:t,utc_offset:Object(m.c)()},Object(j.a)(r))});await c.json(),a(Object(f.a)())})(e.id,r))}},startProject=e=>async t=>{t(Object(k.b)({content_item_id:e.id,started:!0})),t((e=>async(t,a)=>{const s=Object(O.h)(a()),r=s.track_id,n=await Object(_.a)({method:"POST",endpoint:"/practice/start_project",data:_objectSpread({project_id:e,track_id:r,utc_offset:Object(m.c)()},Object(j.a)(s))});await n.json(),t(Object(f.a)())})(e.id))};var y=a("2Y9M"),g=a("doSx"),w=a("hsD4"),E=a("/VKx"),v=a("TSYQ"),P=a.n(v),T=a("OoWH"),C="body__1puO-PnHFWpw0UyjbWF1No",D="item__2f2y_7I5rfWJ_TLZSmhALb",S="centeredCheckbox__2QQhtR9gO-52xrQs_8ZEjS",x="narrativeMarkdown__1UywfcBd-60XKky6qUHIYA",L="scrollable___DFOWZAyFa-jr7fZML66U",N=a("kVzq");class TaskCheckBox_TaskCheckBox extends c.a.PureComponent{constructor(...e){super(...e),Object(l.a)(this,"onKeyDown",(e=>{13!==e.which&&32!==e.which||(this.props.onToggle(),e.preventDefault())}))}componentDidMount(){this.props.broadcast("taskItemMounted")}render(){const e=P()({"fcn-task__check":!0,"fcn-task__check--checked":this.props.checked,[S]:!0});return c.a.createElement("div",{"aria-checked":this.props.checked,"aria-label":this.props.label,className:e,"data-cue":"discovery-checklist",onKeyDown:this.onKeyDown,role:"checkbox",tabIndex:0,"data-testid":`task-${this.props.number}-checkbox`},this.props.checked&&c.a.createElement(N.a,{"aria-hidden":!0}))}}class TaskItem_TaskItem extends n.PureComponent{constructor(...e){super(...e),Object(l.a)(this,"handleClick",(()=>{this.props.hasCourseContentItemAccess&&this.props.setTask(!this.props.done)}))}render(){const e=P()({"fit-full":!0,"fcn-task":!0,"fcn-task--complete":this.props.done});return c.a.createElement("article",{className:e},c.a.createElement(E.a,{className:C,onClick:this.handleClick},c.a.createElement(E.b,null,c.a.createElement(TaskCheckBox_TaskCheckBox,{broadcast:this.props.broadcast,checked:this.props.done,label:`Task item ${this.props.number}`,onToggle:this.handleClick,number:this.props.number})),c.a.createElement(E.b,{className:D},c.a.createElement("span",{className:"fcn-task__number","data-testid":`task-${this.props.number}`},this.props.number,".")),c.a.createElement(p.a,{text:this.props.text,className:P()(x,L)})),this.props.hint?c.a.createElement(T.a,{hint:this.props.hint}):null)}}var I=Object(o.connect)((e=>({hasCourseContentItemAccess:Object(O.N)(e)})))(TaskItem_TaskItem);class TaskListHeader_TaskListHeader extends c.a.PureComponent{render(){return c.a.createElement("h2",{className:"fit-full fcn-task-header"},this.props.heading)}}var B="tasks__2zeiH_BHmhuJBXUlJC3X0R",K="tasksHelp__2gwNuLZ9kdz9gCp9vw39no";class TaskList_TaskList extends c.a.Component{constructor(...e){super(...e),Object(l.a)(this,"makeTaskItems",(({heading:e,tasks:t},a,s)=>{const r=[];return t.forEach(((e,t)=>{var n;const o=this.props.progress,i=e.done,p=null==o||null===(n=o.checklist)||void 0===n?void 0:n[e.task_key];r.push(c.a.createElement(I,{text:e.text,number:t+1+a,key:`task-${e.task_key}`,hint:e.hint,done:i||Boolean("string"==typeof p?"true"===p:p),broadcast:this.props.broadcast,setTask:e=>{this.props.setTask(s,t,e)}}))})),c.a.createElement("div",{key:`task-criteria-${e}`},r)}))}render(){const e=[];let t=0;return this.props.taskGroups.forEach(((a,s)=>{a.heading&&a.heading.length>0&&e.push(c.a.createElement(TaskListHeader_TaskListHeader,{key:`task-heading-${a.heading}`,heading:a.heading})),e.push(this.makeTaskItems(a,t,s)),t+=a.tasks.length})),c.a.createElement("div",{className:B},c.a.createElement("span",{className:K},"Mark the tasks as complete by checking them off"),e)}}var H=a("45Gz"),A=a("FZcb"),G=a("Xxlx"),M=a("z9go"),Q="group__LspoGf1Fw0-ac_AUnuvRV";function ButtonGroup_ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}var U=Object(o.connect)((e=>({contentIds:Object(O.h)(e)})))((({contentIds:e,project:t,hasNoProgress:a,onStart:s})=>{const r=Object(o.useSelector)(O.N),n=t.slug,i=t.title,p=t.projectInformation.download_path,trackStart=e=>{p&&Object(M.b)("user","email_trigger",function ButtonGroup_objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ButtonGroup_ownKeys(Object(a),!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ButtonGroup_ownKeys(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({content_item_name:i,content_item_id:n},e))};return c.a.createElement("div",{className:Q},p&&c.a.createElement(G.a,{data:{content_ids:e,target:"ipp_start_download"},href:p,onClick:()=>trackStart({type:"ipp_start_download"})},c.a.createElement(A.a,{onClick:a?s:void 0,theme:"brand-yellow","data-testid":"download-btn",disabled:!r},"Download")),a&&c.a.createElement(G.a,{data:{content_ids:e,target:"ipp_start_platform"},disableTracking:!p,onClick:()=>trackStart({type:"ipp_start_platform"})},c.a.createElement(A.a,{onClick:s,theme:"brand-yellow","data-testid":"start-btn",disabled:!r},"Start")))})),Z={taskHeading:"taskHeading__1JEaVBblmeZBvqgNSR70QO",taskListCounter:"taskListCounter__1ntH11Ojh2_05E78kaz98u"};t.a=({broadcast:e,presenter:{project:t,contentItemTitle:a,contentParentTitle:l,progress:d},modifiers:{assessments:b}})=>{const u=Object(o.useDispatch)(),k=Object(o.useSelector)(O.G);Object(n.useEffect)((()=>{u&&u(Object(h.d)())}),[u]);const setTask=(e,a,s)=>{const r=b[e].tasks[a];u(updateProjectTaskProgress(t,r.task_key,s))},m=Object(n.useCallback)((()=>{e("start"),u(startProject(t))}),[e,u,t]),_=l||(null==k?void 0:k.title),j=a||(null==t?void 0:t.title),f=[{heading:c.a.createElement(w.a,{as:"div",icon:s.a},i.components.brief.objective),content:c.a.createElement(y.a,{contentParentTitle:_,contentItemTitle:j},c.a.createElement(p.a,{text:t.projectInformation.objective}),c.a.createElement(U,{hasNoProgress:!d.started,onStart:m,project:t})),key:"objective"}];if(d.started){const t=b.flatMap((e=>e.tasks));f.push({heading:c.a.createElement(w.a,{icon:r.a,notes:c.a.createElement(H.a,{classNames:{normal:Z.taskCounter},total:t.length,complete:t.filter((e=>e.done)).length})},i.components.brief.tasks),content:c.a.createElement(TaskList_TaskList,{taskGroups:b,setTask:setTask,broadcast:e,progress:d}),key:"selfAssessments"})}return c.a.createElement(g.a,{content:f})}}}]);
//# sourceMappingURL=108.2faabc5238cb532e83a1.chunk.js.map